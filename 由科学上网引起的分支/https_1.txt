## https的安全(一)

### 以下来自知乎车小胖老师
***
https安全通信分三个阶段：
1）认证服务器
2）交换加密key
3）https流量传输

如果想攻击https，可以分别从这三个阶段入手。
第一：认证阶段—虚假证书

欺骗诱导用户安装根证书，一旦根证书（CA公钥）安装好，一个信任链就形成了.
CA可以用自己的私钥给任何服务器签署证书，只要CA愿意。
举例一一公司想监控用户的流量，包括https流量，只要预先给员工电脑里安装一个根证书，然后在公司网络出口有监控软件，有根证书的私钥。
当用户访问https服务器时，监控软件欺骗用户自己就是https服务器，与用户建立SSL连接。
然后监控软件再与真正的https服务器建立SSL连接。用户与服务器的加密流量监控软件可以一览无余。

第二：交换key阶段—攻击
DH算法采用超级计算机，离线计算DH算法素数对.
经过常年累月的计算，形成一个庞大的素数对数据库，用这个数据库来比对捕获到的DH交换，
一旦匹配到，用户的session key 就获得了，可以解密https流量。斯诺登团队就是这么干的！

第三：加密key暴力破解
目前加密算法使用AES256块式加密，
如果不知道key，
而使用暴力破解，理论上需要2^256 次才能破解，这个计算量是一个不可能完成的任务。
所以现实的做法是使用第一、第二种方法破解SSL流量。
Https只加密http报文，IP层完全是明文，所以谈不上任何的隐身。

Https安全注意事项浏览器里的安全选项-SSL，只勾选TLS 1.2，其它统统不要。不随意安装根证书，遇到可疑证书删掉为好！
