#利用jvm虚拟机调优#

利用jvm那些参数进行调优呢？
在Hot Spot虚拟机中，可以使用-Xss参数来设置栈大小。

在frame栈帧中，存放了方法的局部变量表、操作数栈、动态链接方法和返回地址等信息。
每一个方法的调用都伴随着栈帧的入栈操作。
相应的，方法的返回则表示栈帧的出栈操作。
如果方法调用时，方法的参数和局部变量相对较多，那么栈帧的局部变量表就会比较大。

那么局部变量表是个什么东西呢？

局部变量表用于存放方法的参数和方法内部的局部变量。
局部变量表是以“字”为单位进行内存的划分，一个字为32位长度。
对于long和double类型的变量，则占用2个字，其余类型使用1个字。

在方法执行时，虚拟机使用局部变量表来完成方法的传递。
对于非static方法，虚拟机还会将当前对象(this)作为参数通过局部变量传递给当前方法。

#局部变量表查看#
使用jclasslib工具可以查看class文件中每个方法所分配的最大局部变量表的容量。

局部变量表中的字空间是可以重用的。
因为在一个方法体内，局部变量的作用域不一定是整个方法体。
```
//变量b完全可以重用变量a的空间
public class TestWordReuse {
	public void test1(){
		{
			long a = 0;
		}
		long b = 0;
	}
}
```

#局部变量中的字可能会影响GC回收#
如果这个字没有被后续代码复用，那么它所引用的对象不会被GC释放。
```
public static void test4(){
	{
		int c = 0;
		byte[] b = new byte[6*1024*1024];
	}
	int a = 0; //复用c的字
	System.gc();
	System.out.println("first explict gc over");
}
```